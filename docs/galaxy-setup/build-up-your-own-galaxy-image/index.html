<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.31.1" />
    <meta name="description" content="">


    <link rel="shortcut icon" href="../../images/favicon.png" type="image/x-icon" />
<link rel="icon" href="../../images/favicon.png" type="image/x-icon" />

    <title>Build up your own Galaxy image :: Learn Galaxy and Tripal Galaxy</title>
    
    
    <link href="../../css/nucleus.css?1512829624" rel="stylesheet">
    <link href="../../css/font-awesome.min.css?1512829624" rel="stylesheet">
    <link href="../../css/hybrid.css?1512829624" rel="stylesheet">
    <link href="../../css/featherlight.min.css?1512829624" rel="stylesheet">
    <link href="../../css/perfect-scrollbar.min.css?1512829624" rel="stylesheet">
    <link href="../../css/auto-complete.css?1512829624" rel="stylesheet">
    <link href="../../css/theme.css?1512829624" rel="stylesheet">
    <link href="../../css/hugo-theme.css?1512829624" rel="stylesheet">
    
      <link href="../../css/theme-blue.css?1512829624" rel="stylesheet">
    

    <script src="../../js/jquery-2.x.min.js?1512829624"></script>
    
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{ 
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/galaxy-setup/build-up-your-own-galaxy-image/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://statonlab.github.io/learn-galaxy-and-tripal-galaxy">
  <h>Galaxy, Tripal and Computational Analysis</h>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Search...">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>

<script type="text/javascript" src="../../js/lunr.min.js?1512829624"></script>
<script type="text/javascript" src="../../js/auto-complete.js?1512829624"></script>
<script type="text/javascript">
    
        var baseurl = "\/";
    
</script>
<script type="text/javascript" src="../../js/search.js?1512829624"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/galaxy-setup/" title="Galaxy Setup" class="dd-item 
        parent
        
        
        ">
      <a href="../../galaxy-setup/">
          <b>1. </b>Galaxy Setup
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/galaxy-setup/launch-galaxy-instance/" title="Launch Galaxy Instance" class="dd-item ">
        <a href="../../galaxy-setup/launch-galaxy-instance/">
        Launch Galaxy Instance
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/galaxy-setup/install-galaxy-tools/" title="Install Galaxy Tools" class="dd-item ">
        <a href="../../galaxy-setup/install-galaxy-tools/">
        Install Galaxy Tools
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/galaxy-setup/build-up-your-own-galaxy-image/" title="Build up your own Galaxy image" class="dd-item active">
        <a href="../../galaxy-setup/build-up-your-own-galaxy-image/">
        Build up your own Galaxy image
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/use-galaxy/" title="Use Galaxy" class="dd-item 
        
        
        
        ">
      <a href="../../use-galaxy/">
          <b>2. </b>Use Galaxy
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/use-galaxy/use-tools/" title="Use Tools" class="dd-item 
        
        
        
        ">
      <a href="../../use-galaxy/use-tools/">
          Use Tools
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/use-galaxy/use-tools/build-dataset-collection/" title="Build Dataset Collection" class="dd-item ">
        <a href="../../use-galaxy/use-tools/build-dataset-collection/">
        Build Dataset Collection
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/use-galaxy/use-tools/run-tools/" title="Run Tools" class="dd-item ">
        <a href="../../use-galaxy/use-tools/run-tools/">
        Run Tools
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/use-galaxy/use-tools/view-results/" title="View Results" class="dd-item ">
        <a href="../../use-galaxy/use-tools/view-results/">
        View Results
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/use-galaxy/use-tools/download-results/" title="Download Results" class="dd-item ">
        <a href="../../use-galaxy/use-tools/download-results/">
        Download Results
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/use-galaxy/build-workflows/" title="Build Workflows" class="dd-item 
        
        
        
        ">
      <a href="../../use-galaxy/build-workflows/">
          Build Workflows
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/use-galaxy/build-workflows/build-workflow-from-scratch/" title="Build Workflow from Scratch" class="dd-item ">
        <a href="../../use-galaxy/build-workflows/build-workflow-from-scratch/">
        Build Workflow from Scratch
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/use-galaxy/build-workflows/extract-workflow-from-history/" title="Extract Workflow from History" class="dd-item ">
        <a href="../../use-galaxy/build-workflows/extract-workflow-from-history/">
        Extract Workflow from History
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/use-galaxy/import-data/" title="Import Data to Galaxy" class="dd-item 
        
        
        
        ">
      <a href="../../use-galaxy/import-data/">
          Import Data to Galaxy
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/use-galaxy/import-data/upload-local-data/" title="Upload Local Data" class="dd-item ">
        <a href="../../use-galaxy/import-data/upload-local-data/">
        Upload Local Data
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/use-galaxy/import-data/import-with-ftp/" title="Import with FTP" class="dd-item ">
        <a href="../../use-galaxy/import-data/import-with-ftp/">
        Import with FTP
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/galaxy-workflows/" title="Galaxy Workflows" class="dd-item 
        
        
        
        ">
      <a href="../../galaxy-workflows/">
          <b>3. </b>Galaxy Workflows
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/galaxy-workflows/normalized-rnaseq-counts-se/" title="Normalized RNASeq Counts (single end reads)" class="dd-item ">
        <a href="../../galaxy-workflows/normalized-rnaseq-counts-se/">
        Normalized RNASeq Counts (single end reads)
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/galaxy-workflows/normalized-rnaseq-counts-pe/" title="Normalized RNASeq Counts (paired end reads)" class="dd-item ">
        <a href="../../galaxy-workflows/normalized-rnaseq-counts-pe/">
        Normalized RNASeq Counts (paired end reads)
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/tripal-galaxy-setup/" title="Tripal Galaxy Setup" class="dd-item 
        
        
        
        ">
      <a href="../../tripal-galaxy-setup/">
          <b>4. </b>Tripal Galaxy Setup
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/use-tripal-galaxy/" title="Use Tripal Galaxy" class="dd-item 
        
        
        
        ">
      <a href="../../use-tripal-galaxy/">
          <b>5. </b>Use Tripal Galaxy
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="footer">
      <hr/>
<i class="fa fa-github fa-lg" aria-hidden="true">
  <a href="https://github.com/matcornic/hugo-theme-learn"> Built with hugo-theme</a></i>
<br/>
<i class="fa fa-github fa-lg" aria-hidden="true">
  <a href="https://github.com/statonlab/learn-galaxy-and-tripal-galaxy"> GitHub Repository</a></i>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fa fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                  
                  <span class="links">
                    
          
          
            
            
          
          
            
            
          
          
            <a href='../../'>Galaxy, Tripal Galaxy and Computational Analysis</a> > <a href='../../galaxy-setup/'>Galaxy Setup</a> > Build up your own Galaxy image
          
         
          
         
          
           
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">

    </div>
</div>

                
              </div>
            </div>
            

        
        <div id="body-inner">
          
            <h1>Build up your own Galaxy image</h1>
          

        


<style>
pre code, pre, code {
  white-space: pre !important;
  overflow-x: scroll !important;
  word-break: keep-all !important;
  word-wrap: initial !important;
}
</style>
<div id="build-up-your-own-galaxy-container" class="section level2">
<h2>Build up your own Galaxy container</h2>
<p>The <a href="https://github.com/bgruening/docker-galaxy-stable">Galaxy Docker container</a> we are using only has basic tools. Performing a complicated computational analysis can involve many many tools. We can install many tools into a Galaxy instance and save the installation work into a container. Next time when we need a Galaxy instance for data analysis, we can launch one with our own Galaxy container. The container will already have the tools we install before. We don’t need to go through the whole process again.</p>
<p>To build such a Galaxy container, we can simply run the command:</p>
<pre class="r"><code>docker commit [CONTAINER ID] [DOCKER_USERNAME]/[CONTAINER_NAME]</code></pre>
<ul>
<li><code>[CONTAINER ID]</code>: the container ID, which can be found by running the command <code>docker ps -a</code>.</li>
<li><code>[DOCKER_USERNAME]</code>: the username of your <a href="https://hub.docker.com/">docker hub account</a>.</li>
<li><code>[CONTAINER_NAME]</code>: the container name for identifying this container.</li>
</ul>
<p>Let’s the see an example.</p>
<div id="run-the-command-below-to-get-container-id" class="section level4">
<h4>Run the command below to get container ID:</h4>
<pre class="r"><code>docker ps -a</code></pre>
<p>You should get something similar to this.</p>
<pre class="r"><code>CONTAINER ID        IMAGE                           COMMAND             CREATED             STATUS              PORTS                                                                                         NAMES
fd2d0f70a407        bgruening/galaxy-stable:17.01   &quot;/bin/bash&quot;         13 hours ago        Up 13 hours         443/tcp, 8800/tcp, 0.0.0.0:80-&gt;80/tcp, 9002/tcp, 0.0.0.0:8021-&gt;21/tcp, 0.0.0.0:8022-&gt;22/tcp   gallant_hugle</code></pre>
<p>You will get the container ID (<code>fd2d0f70a407</code>), which docker image (<code>bgruening/galaxy-stable:17.01</code>) you are using to launch your galaxy instance, and some other information.</p>
</div>
<div id="build-your-own-galaxy-image" class="section level4">
<h4>Build your own Galaxy image</h4>
<pre class="r"><code>docker commit fd2d0f70a407 mingchen0919/my_own_galaxy</code></pre>
<p>Here my Docker hub account username is <code>mingchen0919</code>, and my docker image name is <code>my_own_galaxy</code>.</p>
</div>
<div id="use-your-own-galaxy-image" class="section level4">
<h4>Use your own Galaxy image</h4>
<p>We will use the same command to launch our galaxy instance. We just need to replace the docker image <code>bgruening/galaxy-stable:17.01</code> with our own image <code>mingchen0919/my_own_galaxy</code>.</p>
<pre class="r"><code>docker run -i -t --rm \
  -p 80:80 -p 8021:21 -p 8022:22 \
  -e &quot;ENABLE_TTS_INSTALL=True&quot; \
  -e &quot;GALAXY_CONFIG_ADMIN_USERS=example@gmail.com&quot; \
  mingchen0919/my_own_galaxy /bin/bash</code></pre>
</div>
<div id="iterate-galaxy-image-building" class="section level4">
<h4>Iterate Galaxy image building</h4>
<p>If you install new tools to the Galaxy instance launched from your own Galaxy image. You can run another commit to save your work to a new Galaxy image. Note if you have uploaded some datasets and done some analysis, the uploaded data and analysis will also be committed to your new image. You probably should commit your new image before running any analysis, unless you want to integrate it to your image.</p>
<p>Get the new container ID by running <code>docker ps -a</code>. You will see something similar to this.</p>
<pre class="r"><code>CONTAINER ID        IMAGE                           COMMAND             CREATED             STATUS              PORTS                                                                                         NAMES
ed2dbf76a407        mingchen0919/my_own_galaxy   &quot;/bin/bash&quot;         1 hours ago        Up 13 hours         443/tcp, 8800/tcp, 0.0.0.0:80-&gt;80/tcp, 9002/tcp, 0.0.0.0:8021-&gt;21/tcp, 0.0.0.0:8022-&gt;22/tcp   gallant_monster</code></pre>
<p>You can commit a new image from this running container with command:</p>
<pre class="r"><code>docker commit ed2dbf76a407 mingchen0919/my_own_galaxy</code></pre>
<p>The command above will overwrite your <code>my_own_galaxy</code> image with updates. If you don’t want to overwrite it, you can choose a different name.</p>
</div>
<div id="push-your-image-to-docker-hub" class="section level4">
<h4>Push your image to Docker hub</h4>
<p>You can push your image to Docker hub repository. If you want to run a Galaxy instance on a different machine, you can simply pull the image from the Docker hub and launch a Galaxy instance.</p>
<p>The command to push image to Docker hub is</p>
<pre class="r"><code>docker push mingchen0919/my_own_galaxy</code></pre>
</div>
</div>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


        
            <a class="nav nav-prev" href="../../galaxy-setup/install-galaxy-tools/" title="Install Galaxy Tools"> <i class="fa fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="../../use-galaxy/" title="Use Galaxy" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="../../js/clipboard.min.js?1512829624"></script>
    <script src="../../js/perfect-scrollbar.min.js?1512829624"></script>
    <script src="../../js/perfect-scrollbar.jquery.min.js?1512829624"></script>
    <script src="../../js/jquery.sticky.js?1512829624"></script>
    <script src="../../js/featherlight.min.js?1512829624"></script>
    <script src="../../js/html5shiv-printshiv.min.js?1512829624"></script>
    <script src="../../js/highlight.pack.js?1512829624"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../../js/modernizr.custom.71422.js?1512829624"></script>
    <script src="../../js/learn.js?1512829624"></script>
    <script src="../../js/hugo-learn.js?1512829624"></script>

    <link href="../../mermaid/mermaid.css?1512829624" type="text/css" rel="stylesheet" />
    <script src="../../mermaid/mermaid.js?1512829624"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

